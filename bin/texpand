#!/bin/bash
declare -A dict
declare -a keys
while read key value; do
    keys+=($key)
    dict[$key]=$value
done < ~/dotfiles/abbrevs

list() {
    for k in ${keys[*]}; do
        echo "$k"
        echo "    ${dict[$k]}"
    done
}

while getopts 'l' opt; do
    case $opt in
        l) list; exit;;
    esac
done

if [ -z "$(which xsel)" ]; then
    echo "You need to have xsel installed"
    exit 1
fi

if [ -z "$1" ]; then
    read -p "Abbreviation: " abbrev
else
    abbrev="$1"
fi

text=${dict[$abbrev]}


if [ -z "$text" ]; then
    echo "Could not find that..."
    echo "Available:"
    list
    exit 1
fi

echo -n "$text" | tee >(xsel -ib)
