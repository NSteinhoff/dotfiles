#!/bin/bash
# vim: ft=sh

[[ -n "${TMUX}" ]] || exit

# Only show the prompt when the statusline is disabled
tmux show-options -g status | grep --silent "status off" || exit

tmuxinfo="$(
    tmux list-windows -F '#S:#I:#P #{window_active}' |
    grep '1$' |
    cut -d' ' -f1
)"

case $tmuxinfo in
    default:*)
        shortinfo="*${tmuxinfo#default}" ;;
    [0123456789]*:1:1)
        shortinfo="T" ;;  # one the first window and pane of a numbered session
    *)
        shortinfo="${tmuxinfo}" ;;
esac

echo -en "[\033[1;33m${shortinfo}\033[0m] "
