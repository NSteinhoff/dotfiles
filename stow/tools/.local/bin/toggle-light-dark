#!/bin/bash
color=$(colorscheme -p)
echo $color

mode=unknown
if [[ "$color" == *-light ]]; then
    mode=light
elif [[ "$color" == *-dark ]]; then
    mode=dark
fi

if [[ "$mode" == unknown ]]; then
    echo "Colorscheme '$color' has no light/dark variants."
    exit 1
fi

if [[ $mode == light ]]; then
    othermode=dark
else
    othermode=light
fi

newmode=${1:-toggle}
if [[ $newmode == toggle ]]; then
    newmode=$othermode
fi

if [[ $newmode != $mode ]]; then
    colorscheme "${color%-${mode}}-$newmode"
fi
